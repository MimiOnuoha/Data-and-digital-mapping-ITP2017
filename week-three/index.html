<!-- Leaflet reference: http://leafletjs.com/reference.html -->
<!-- Omnivore reference: https://github.com/mapbox/leaflet-omnivore -->

<!DOCTYPE html>
<head>
    <style>
    

    </style>
    <title> Moves Data </title>
    <script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet'>

    <link href='styles.css' rel='stylesheet'>
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
</head>

<body>
    <div id="map"></div>
    <script>
    // BaseMap
    var layer = L.tileLayer('https://api.mapbox.com/styles/v1/monuoha/ciz4l5cnb00582rqb17nsay9n/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibW9udW9oYSIsImEiOiJEN0llUXVZIn0.H0DvYd5sdO9b3dNcnuucvw');
    var map = L.map('map').setView([40.7246342, -73.9427715], 13);
    map.addLayer(layer);

    // Walking Layer
    var walkingLayer = L.geoJson(null, {
        filter: function(feature) {
            // console.log(feature.properties.activities[0].activity);
            return feature.properties.activities[0].activity == "walking";
        },
        style: function(feature){
            return {
                color: "orange",
                weight: 5
            }
        }
    });

    // Transport Layer
    var transportLayer = L.geoJson(null, {
        filter: function(feature) {
            // console.log(feature.properties.activities[0].activity);
            return feature.properties.activities[0].activity == "transport";
        },
        style: function(feature){
            return {
                color: "#34F1BD",
                weight: 5,
                opacity: .4
            }
        }
    });

    // Places Layer
    var placesLayer = L.geoJson(null, {
        pointToLayer: function(feature, latlng){
            return new L.CircleMarker(latlng, {
                radius: 10,
                color: "white",
                fillOpacity: 1
            })
        },
        onEachFeature(feature, layer){
            // console.log(feature.properties.place.location.lat);
            layer.bindPopup("<strong>Location</strong>:" + "</br>" + String(feature.properties.place.location.lat.toFixed(2)) + ", " + String(feature.properties.place.location.lon.toFixed(2)))
        },
        filter: function(feature){
            return feature.properties.place.type == "home"
        }

    });


    var dataLayer = omnivore.geojson("data/activities.geojson", null, walkingLayer).addTo(map);
    var dataLayer = omnivore.geojson("data/activities.geojson", null, transportLayer).addTo(map);
    var dataLayer = omnivore.geojson("data/places.geojson", null, placesLayer).addTo(map);



    </script>
</body>

</html>
